# ParticleAdorn 粒子装扮系统 - 技术亮点介绍

## 🌟 核心特色：革命性的3D粒子特效引擎

ParticleAdorn是一款基于Nukkit平台开发的专业级粒子装扮插件，采用先进的**数学参数方程驱动**的3D粒子坐标计算技术，在Minecraft世界中实现了前所未见的动态视觉效果。

## QQ交流群: `923692261`

### 🔧 技术架构亮点

**1. 自主研发的数学表达式计算引擎**
- 内置完整的中缀表达式解析器，支持复杂数学运算
- 集成三角函数、对数、开方等高级数学函数
- 支持变量替换系统（k轴角度、v轴角度、玩家坐标等）
- 实现了类似JavaScript eval()的动态表达式求值能力

**2. 创新的双角度坐标系统**
- **k轴（垂直角度）**：控制1-180°的俯仰角度
- **v轴（水平角度）**：控制1-360°的方位角度
- 通过精密的模运算实现无缝角度循环
- 支持独立的增量调节（1-179, 1-359范围）

**3. 智能粒子轨迹生成**
```yaml
# 经典圆圈参数方程示例
动态算法表:
  - {
    "minecraft:endrod": [
      { # 画一个半径为3的圆圈
        x: "3 * cos(v)",    # X坐标
        y: "o.5",           # Y坐标
        z: "3 * sin(k)"     # Z坐标
      }
    ]
  }
```

### 🎯 商业化功能体系

**1. 完善的经济系统集成**
- 深度整合EconomyAPI经济接口
- 支持限时购买、永久拥有等多种商业模式
- 灵活的价格设定和时效管理系统
- 智能的库存管理和商品上架机制
- SQL 数据库支持 (待做)
- 自动转换公式为静态坐标列表 (暂无计划)

**2. 用户友好的交互界面**
- 基于虚拟容器的现代化GUI系统
- 支持大型双箱界面(45格存储空间, 且支持翻页)
- 平滑的翻页导航和异步加载机制
- 直观的装备/卸下操作体验

**3. 精细化性能优化**
- 5级性能自定义评估体系（0-5级可调）
- 智能的粒子密度控制
- 可配置的渲染间隔和帧率优化
- 针对不同硬件配置的自适应显示

### ⚡ 核心技术创新点

**1. 动态参数化建模**
- 通过YAML配置文件定义复杂数学曲线
- 支持正弦波、螺旋线、利萨茹曲线等经典轨迹
- 实现粒子在三维空间中的精确运动控制

**2. 实时坐标变换系统**
- 玩家视角自适应的坐标系转换
- 支持相对坐标和绝对坐标的无缝切换
- 完善的边界检测和溢出保护机制

**3. 高并发任务调度**
- 基于ScheduledExecutorService的精准定时器
- 50毫秒精度的任务循环控制
- 线程安全的数据同步和状态管理

### 🎨 视觉效果展示

**基础几何形态：**
- ✅ 完美球体表面粒子分布
- ✅ 螺旋上升轨迹效果
- ✅ 波浪状起伏动画
- ✅ 8字形复杂轨迹

**高级特效组合：**
- 🌟 Y轴0-2区间往复运动
- 🌟 多层同心圆环效果
- 🌟 渐进式颜色变换
- 🌟 动态缩放和旋转

### 🏆 竞争优势分析

相比传统粒子插件，ParticleAdorn的独特价值在于：

1. **技术门槛极高**：融合了高等数学、编译原理、3D图形学等多个领域的专业知识
2. **扩展性极强**：通过简单的YAML配置即可创造无限种视觉效果
3. **商业价值显著**：完善的商城系统和用户管理体系
4. **性能表现优异**：智能优化机制确保流畅运行体验
5. **对于用户友好**：即使数学天赋不高也可以通过静态遍历坐标列表实现

### 🚀 应用场景

- **游戏服务器装饰**：打造独特的视觉标识
- **VIP特权系统**：差异化玩家体验设计
- **节庆活动特效**：动态环境氛围营造
- **品牌宣传展示**：创意广告载体平台

## 🚀 快速开始

### 1. 插件安装
1. 将ParticleAdorn.jar放入plugins文件夹
2. 重启服务器
3. 插件将自动生成配置文件结构

### 2. 基础配置
```yaml
# config.yml 基础设置
服务器名称: "§r§b粒子装扮 §a>>> §7"
服务器提示: "§r§b粒子装扮 §a丨 §7"
指令: "plradn"
默认使用: "Null"
```

### 3. 创建第一个粒子效果
1. 在`plugins/ParticleAdorn/Particles/`目录下创建`first.yml`
2. 添加基础圆形轨迹配置
3. 重启服务器或使用`/plradn reload`重载配置

### 4. 玩家使用
- `/plradn my` - 查看已拥有的粒子
- `/plradn shop` - 访问粒子商店
- `/plradn sml` - 设置性能优化级别

## 📁 配置结构

```
plugins/ParticleAdorn/
├── Config.yml          # 主配置文件
├── Players/            # 玩家数据目录
│   └── {uuid}.yml      # 玩家个人配置
└── Particles/          # 粒子效果目录
    ├── test1.yml       # 示例粒子效果
    └── first.yml       # 用户自定义效果
```

### 粒子配置文件结构
```yaml
# 粒子效果配置模板
性能评估等级: 1         # 1-5级性能评估
调度间隔: 1            # 角度更新间隔(tick)
k轴增量: 10            # 垂直角度增量(1-179)
v轴增量: 10            # 水平角度增量(1-359)
换帧间隔: 20           # 粒子刷新间隔
读帧延迟: 0            # 渲染延迟

动态算法表:
  - {
    "粒子ID": [
      { 
        x: "数学表达式",    # X轴坐标计算
        y: "数学表达式",    # Y轴坐标计算
        z: "数学表达式"     # Z轴坐标计算
      }
    ]
  }
```

### 支持的变量
- `k` - 垂直角度(1-180)
- `v` - 水平角度(1-360)
- `x/y/z` - 玩家坐标
- `yaw/pitch` - 玩家视角
- `eh` - 玩家眼部高度

### 数学函数支持
- `sin(), cos(), tan()` - 三角函数
- `sqrt(), abs()` - 数学运算
- `log(), exp()` - 对数指数函数

## 📊 核心配置详解

### 静态预算表 (Static Position List)

**用途**：预计算的固定坐标列表，适合简单轨迹

```yaml
静态预算表:
  - {  # 第一帧
    "粒子ID": [
      "x:y:z",      # 坐标格式：X:Y:Z
      "1:2:3",      # 示例坐标点
      "2:2:4",      # 多个坐标点形成轨迹
      "3:2:3"
    ]
  }
  - {  # 第二帧（可选，用于动画效果）
    "粒子ID": [
      "1.5:2.5:3.5",
      "2.5:2.5:4.5"
    ]
  }
```

**注意事项**：
- 坐标使用冒号分隔
- 支持小数和负数
- 每个大括号代表一帧画面
- 多帧可实现简单的动画效果

### 动态算法表 (Dynamic Algorithm Table)

**用途**：通过数学表达式实时计算坐标，适合复杂轨迹

```yaml
动态算法表:
  - {  # 第一帧
    "粒子ID": [
      { 
        x: "表达式",    # X轴计算公式
        y: "表达式",    # Y轴计算公式
        z: "表达式"     # Z轴计算公式
      },
      {  # 同一帧可包含多个不同效果
        x: "3 * cos(v)",
        y: "1 + sin(k)",
        z: "3 * sin(v)"
      }
    ]
  }
```

**配置要点**：
1. **表达式语法**：
   - 支持基本四则运算 `+ - * /`
   - 支持括号优先级 `( )`
   - 可使用内置变量和函数

2. **常见错误避免**：
   ```yaml
   # ❌ 错误示例
   {
   x: "2 * sin k"        # 缺少括号
   y: "cos(v) * 3"       # 正确
   z: "sqrt -4"          # 负数开方错误
   }
   
   {
   # ✅ 正确示例
   x: "2 * sin(k)"       # 函数调用需加括号
   y: "3 * cos(v)"       # 数字可前置或后置
   z: "sqrt(abs(-4))"    # 负数需先取绝对值
   }
   ```

3. **性能优化建议**：
   - 简单效果优先使用静态预算表
   - 复杂轨迹使用动态算法表
   - 避免过于复杂的嵌套表达式
   - 合理设置调度间隔参数

### 配置完整性检查清单

✅ **必填项检查**：
- [ ] 性能评估等级 (1-5)
- [ ] 调度间隔 (≥0)
- [ ] k轴/v轴增量 (1-179/1-359)
- [ ] 换帧间隔 (≥0)
- [ ] 至少配置一种坐标表

✅ **语法检查**：
- [ ] YAML格式正确（注意缩进）
- [ ] 引号使用一致
- [ ] 括号匹配完整
- [ ] 变量名拼写正确

✅ **逻辑检查**：
- [ ] k轴范围1-180°
- [ ] v轴范围1-360°
- [ ] 表达式结果为数值
- [ ] 坐标值在合理范围内

ParticleAdorn不仅是一款插件，更是Minecraft服务器美化领域的一次技术革新，为开发者提供了前所未有的创作自由度和商业变现可能性。

## 📜 开源协议声明

本项目采用宽松的开源许可协议：

**允许的行为：**
- ✅ 自由转载、传播本文档内容
- ✅ 商业用途使用（需注明出处）
- ✅ 二次开发和功能扩展
- ✅ 修改源代码以适配不同需求

**使用条件：**
- 📝 **必须注明原始作者和项目来源**
- 🔓 **二次开发作品必须保持开源**
- 🔄 **衍生作品需采用相同或兼容的许可协议**

**禁止行为：**
- ❌ 声称原创作品为自己独立开发
- ❌ 移除或篡改版权声明
- ❌ 将开源代码闭源商业化销售

我们鼓励社区共同参与开发，推动Minecraft插件生态的发展！

***如果喜欢我的插件,觉得效果不错,请给个5★好评吧(下载后在上方评价里面填写),谢谢啦!***

**同时欢迎分享交流你的粒子算法文件**